---
title: "Échec des formations dynamiques pour les balises personnalisées"
description: Description
solution: Experience Manager
product: Experience Manager
applies-to: "Experience Manager"
keywords: « KCS »
resolution: Resolution
internal-notes: null
bug: false
article-created-by: Ruxandra Nitu
article-created-date: "9/5/2023 6:41:03 AM"
article-published-by: Ruxandra Nitu
article-published-date: "9/5/2023 7:16:59 AM"
version-number: 1
article-number: KA-22781
dynamics-url: "https://adobe-ent.crm.dynamics.com/main.aspx?forceUCI=1&pagetype=entityrecord&etn=knowledgearticle&id=f4a6bd2a-b74b-ee11-be6e-6045bd006239"
source-git-commit: 5174cd32a27f06ce26a9e94c1cc550a3cd633361
workflow-type: tm+mt
source-wordcount: '567'
ht-degree: 1%

---

# Les formations dynamiques pour les balises personnalisées échouent

## Description {#description}

.lf-progress { width: 100%; height: 4px; border-radius: 3px; cursor: pointer }<br>.lf-progress:focus { contour : aucun ; bordure : aucun }<br>.lf-progress:-moz-range-track { cursor: pointeur; background: none; border: none; contour: none<br>.lf-progress:-webkit-slider-thumb { height: 13px; width: 13px; border: 0; border-radius: 50%; background: rgba(15, 204, 206, 1); cursor: pointer }<br>.lf-progress:-moz-range-thumb { height: 13px; width: 13px; border: 0; border-radius: 50%; background: rgba(15, 204, 206, 1); cursor: pointer }<br>.lf-progress:-ms-track { width: 100%; height: 3px; cursor: pointer; background: rgba(0, 0, 0, 0); border-color: rgba(0, 0, 0, 0); color: rgba(0, 0, 0, 0) }<br>.lf-progress:-ms-fill-lower { background: rgba(204, 204, 204, 1); border-radius: 3px }<br>.lf-progress:-ms-fill-upper { background: rgba(204, 204, 204, 1); border-radius: 3px }<br>.lf-progress:-ms-thumb { border: 0; height: 15px; width: 15px; border-radius: 50%; background: rgba(15, 204, 206, 1); cursor: }<br>.lf-progress:focus::-ms-fill-lower { background: rgba(204, 204, 204, 1) }<br>.lf-progress:focus::-ms-fill-upper { background: rgba(204, 204, 204, 1) }<br>.lf-player-container:focus { composition : 0 }<br>.lf-popover { position : relative }<br>.lf-popover-content { display: inline-block; position: absolute; opacity: 1; visibility; transform: translate(0, -10px); box-shadow: 0 2px 5px rgba(0, 0, 0, 0,26); transition: all 0.3s cubic-bezier(0.75, -0.02, 2, 0.97) }<br>.lf-popover-content.hidden { opacity: 0; visibility: hidden; transform: translate(0, 0) }<br>.lf-player-btn-container { display: flex; align-items: center }<br>.lf-player-btn { cursor: pointer; width: 14px }<br>.lf-player-btn.active { }<br>.lf-popover { position : relative }<br>.lf-popover-content { display: inline-block; position: absolute; background-color: rgba(255, 255, 255, 1); opacity: 1; transform: translate(0, -10px); box-shadow: 0 2px 5px rgba(0, 0, 0, 0.26); transition all: 0.3s cubic-bezier(0.75, -0.02, 0.2, 0.97); remplissage : 10px }<br>.lf-popover-content.hidden { opacity: 0; visibility: hidden; transform: translate(0, 0) }<br>.lf-flèche { position : absolue ; z-index : -1 ; contenu : &quot;&quot;; bottom : -9px ; border-style : solid ; border-width : 10px 10px 0 }<br>.lf-left-align, .lf-left-align .lfarrow { left: 0; right : unset }<br>.lf-right-align, .lf-right-align .lf-flf { right: 0; left: unset }<br>.lf-text-input { border: 1px solid rgba(204, 204, 204, 1); border-radius: 5px; padding: 3px; width: 60px; margin: 0 }<br>.lf-color-picker { display: flex; flex-direction: row; justify-content: space-entre; height: 90px }<br>.lf-color-selectors { display: flex; flex-direction: column; justify-content: space-entre }<br>.lf-color-component { display: flex; flex-direction: row; font-size: 12px; align-items: center; justify-content: center }<br>.lf-color-component strong { width: 40px }<br>.lf-color-component input`[` type=&quot;range&quot;`]`  { margin : 0 0 10px }<br>.lf-color-component input`[` type=&quot;number&quot;`]`  { width: 50px; margin: 0 0 10px }<br>.lf-color-preview { font-size: 12px; display: flex; flex-direction: column; align-items: center; justify-content: space-between; padding-left: 5px }<br>.lf-preview { height: 60px; width: 60px }<br>.lf-popover-instantané { width: 150px }<br>.lf-popover-instantané h5 { margin: 5px 0 10px; font-size: 0,75rem }<br>.lf-popover-instantané a { display: block; text-decoration: none }<br>.lf-popover-instantané a:before { content: &quot; ⥼&quot;; margin-right: 5px }<br>.lf-popover-instantané .lf-note { display: block; margin-top: 10px; color: rgba(153, 153, 153, 1) }<br>.lf-player-contrôles>div { margin-right: 5px; margin-left: 5px }<br>.lf-player-contrôles>div:first-child { margin-left: 0 }<br>.lf-player-control>div:last-child { margin-right: 0 }.go4109123758 { z-index: 999 }<br>.go4109123758>\* { pointer-events: auto }<br>
<b>Environnement :</b>

AEM as a Cloud Service

<b>Description du problème :</b>

Le client a suivi les étapes de la rubrique `[` 1`]`  pour activer le balisage intelligent (service de contenu dynamique) lors de la création d’un projet AIO et d’une configuration cloud héritée dans AEM.

Après avoir terminé l’intégration du balisage intelligent, ils ont essayé de créer un entraînement de balisage intelligent pour leurs balises personnalisées : `[` 2`]` . Cependant, chaque formation a échoué avec une erreur `[` 3`]`  présent dans les journaux.



`[` 1`]`  [https://experienceleague.adobe.com/docs/experience-manager-learn/assets/metadata/custom-smart-tags.html?lang=en](https://experienceleague.adobe.com/docs/experience-manager-learn/assets/metadata/custom-smart-tags.html?lang=en)

`[` 2`]`  [https://experienceleague.adobe.com/docs/experience-manager-cloud-service/content/assets/manage/smart-tags.html?lang=en#train-model](https://experienceleague.adobe.com/docs/experience-manager-cloud-service/content/assets/manage/smart-tags.html?lang=en#train-model)

`[` 3`]`


```
ERROR[ sling-threadpool-39aa0b87-e4ff-4521-b2c7-fce7134e4e4d-(apache-sling-job-thread-pool)-34-Granite Workflow External Process Polling Queue(com/adobe/granite/workflow/external/polling/event)]  com.day.cq.dam.similaritysearch.internal.workflow.process.DoTrainingProcess Error while checking for training status for jobId 64df73a9f768e24a117590e7
com.day.cq.dam.similaritysearch.internal.SimilaritySearchException: com.day.cq.dam.similaritysearch.internal.SimilaritySearchException: Service returned an error: HTTP/1.1 403 Forbidden
at com.day.cq.dam.similaritysearch.internal.impl.SCSTrainingClientImpl.hasFinishedTraining(SCSTrainingClientImpl.java:203) [ com.day.cq.dam.cq-dam-similaritysearch:5.13.64] 
at com.day.cq.dam.similaritysearch.internal.workflow.process.DoTrainingProcess.hasFinished(DoTrainingProcess.java:95) [ com.day.cq.dam.cq-dam-similaritysearch:5.13.64] 
at com.day.cq.workflow.compatibility.CQWorkflowExtProcessProxy.hasFinished(CQWorkflowExtProcessProxy.java:82) [ com.day.cq.workflow.cq-workflow-impl:6.3.18] 
at com.adobe.granite.workflow.core.util.WEPProxyHolder.hasFinished(WEPProxyHolder.java:46) [ com.adobe.granite.workflow.core:2.1.100] 
at com.adobe.granite.workflow.core.job.ExternalProcessPollingHandler.process(ExternalProcessPollingHandler.java:119) [ com.adobe.granite.workflow.core:2.1.100] 
at org.apache.sling.event.impl.jobs.JobConsumerManager$JobConsumerWrapper.process(JobConsumerManager.java:502) [ org.apache.sling.event:4.3.8] 
at org.apache.sling.event.impl.jobs.queues.JobQueueImpl.startJob(JobQueueImpl.java:351) [ org.apache.sling.event:4.3.8] 
at org.apache.sling.event.impl.jobs.queues.JobQueueImpl.access$100(JobQueueImpl.java:60) [ org.apache.sling.event:4.3.8] 
at org.apache.sling.event.impl.jobs.queues.JobQueueImpl$1.run(JobQueueImpl.java:287) [ org.apache.sling.event:4.3.8] 
at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
at java.base/java.lang.Thread.run(Thread.java:834)
Caused by: com.day.cq.dam.similaritysearch.internal.SimilaritySearchException: Service returned an error: HTTP/1.1 403 Forbidden
```



## Résolution {#resolution}


La documentation suivie par le client pour intégrer AEM avec le contenu dynamique est destinée à AEM on premise version 6.5.

Pour AEM as a Cloud Service, il n’est pas nécessaire de configurer manuellement l’intégration (création d’un projet AIO et d’une configuration cloud héritée). Pour AEMaaCS, cela fonctionne d’usine sans que la configuration du cloud ne soit ajoutée manuellement.

Après la suppression de la configuration cloud héritée, la formation dynamique pour les balises personnalisées s’est terminée avec succès.

<b>RCA :</b>

La configuration cloud héritée créée par le client interférait avec l’intégration prête à l’emploi, provoquant ainsi l’exception SimilaritySearchException et entraînant ainsi des sessions de formation.

Les configurations cloud héritées se trouvent sous /etc/cloudconfigs. Dans un environnement de production, il n’existe aucun accès à crx/de pour le supprimer directement. Par conséquent, dans AEMaaCS, pour un environnement de production, les configurations cloud héritées doivent être supprimées par un déploiement .
